import java.util.*;

/**
 * ì…¸ ì •ë ¬ (Shell Sort)
 *
 * âœ… ê°œìš”
 * - ì‚½ì… ì •ë ¬ì„ í™•ì¥í•œ ì •ë ¬ ì•Œê³ ë¦¬ì¦˜
 * - ì¼ì •í•œ ê°„ê²©(gap)ì„ ë‘ê³  ë–¨ì–´ì§„ ìš”ì†Œë“¤ì„ ë¶€ë¶„ ì‚½ì… ì •ë ¬í•˜ê³ ,
 *   ì ì°¨ ê°„ê²©ì„ ì¤„ì—¬ê°€ë©° ì „ì²´ë¥¼ ì •ë ¬í•˜ëŠ” ë°©ì‹
 * - ê°„ê²©(gap) = N/2 â†’ N/4 â†’ ... â†’ 1 ë¡œ ì¤„ì–´ë“¤ë©° ë°˜ë³µ
 *
 * âœ… ì‘ë™ ë°©ì‹
 * - ì´ˆê¸°ì—” ë¨¼ ê±°ë¦¬ì˜ ìš”ì†Œë¥¼ ë¹„êµí•˜ê³  ì •ë ¬ â†’ ì „ë°˜ì ì¸ ë°°ì—´ ìƒíƒœ ê°œì„ 
 * - gapì´ ì¤„ì–´ë“¤ìˆ˜ë¡ ì‚½ì… ì •ë ¬ì— ê°€ê¹Œì›Œì§ (ê±°ì˜ ì •ë ¬ëœ ë°°ì—´ â†’ íš¨ìœ¨ â†‘)
 * - ë§ˆì§€ë§‰ gapì´ 1ì¼ ë•Œ, ì¼ë°˜ì ì¸ ì‚½ì… ì •ë ¬ ìˆ˜í–‰
 *
 * âœ… ì‹œê°„ ë³µì¡ë„
 * - ìµœì•…: O(NÂ²)
 * - í‰ê· : O(N^1.25) ~ O(N^1.5) (gap ì„ íƒì— ë”°ë¼ ë‹¬ë¼ì§)
 * - **Hibbard, Knuth, Sedgewick** ë“± ë‹¤ì–‘í•œ gap ìˆ˜ì—´ ì œì•ˆë¨
 *
 * âœ… ê³µê°„ ë³µì¡ë„
 * - O(1) (ì œìë¦¬ ì •ë ¬, ì¶”ê°€ ë©”ëª¨ë¦¬ ì—†ìŒ)
 *
 * âœ… ì¥ì 
 * - ì‚½ì… ì •ë ¬ë³´ë‹¤ í›¨ì”¬ ë¹ ë¦„
 * - êµ¬í˜„ ê°„ë‹¨ + ì •ë ¬ëœ ì •ë„ê°€ ë†’ì„ìˆ˜ë¡ ë¹ ë¦„
 * - ë¹„êµì  ì•ˆì •ì  ì„±ëŠ¥ì„ ê°€ì§ (íŠ¹íˆ ì‘ì€ ë°°ì—´ì— ì í•©)
 *
 * âœ… ë‹¨ì 
 * - ì•ˆì • ì •ë ¬ì´ ì•„ë‹˜ (ê°™ì€ ê°’ì˜ ìƒëŒ€ ìˆœì„œê°€ ë°”ë€” ìˆ˜ ìˆìŒ)
 * - ìµœì ì˜ gap ìˆ˜ì—´ ì„ íƒì´ ì •í•´ì ¸ ìˆì§€ ì•ŠìŒ (ìˆ˜í•™ì  ì—°êµ¬ ëŒ€ìƒ)
 *
 * âœ… ì‚¬ìš© ì˜ˆ
 * - ì •ë ¬ ëŒ€ìƒì´ ì‘ê±°ë‚˜ ë©”ëª¨ë¦¬ê°€ ì œí•œì ì¼ ë•Œ ìœ ìš©
 */

public class Main {

    private static final Random random = new Random();

    private static final int INSERTION_SORT_THRESHOLD = 10; // ì‚½ì… ì •ë ¬ë¡œ ì „í™˜í•  ì„ê³„ê°’

    public static void main(String[] args) {
        int[] arr = {8, 4, 1, 6, 3, 9, 2, 5, 7};

        shellSort(arr);

        System.out.println(Arrays.toString(arr));
    }

    /**
     * ğŸ”¹ ì…¸ ì •ë ¬ í•¨ìˆ˜
     *
     * - gapì„ ì ì°¨ ì¤„ì—¬ê°€ë©° ë¶€ë¶„ ì‚½ì… ì •ë ¬ ìˆ˜í–‰
     * - ì¼ë°˜ì ìœ¼ë¡œ gap = gap / 2 ì‚¬ìš© (Knuth ìˆ˜ì—´ë„ ìì£¼ ì‚¬ìš©ë¨)
     */
    private static void shellSort(int[] arr) {
        int n = arr.length;

        // ì´ˆê¸° ê°„ê²© ì„¤ì • (ì—¬ê¸°ì„  ë‹¨ìˆœíˆ n/2, n/4, ..., 1 ë°©ì‹ ì‚¬ìš©)
        for(int gap = n/2; gap > 0; gap /= 2){

            // ê° ë¶€ë¶„ ë°°ì—´ì— ëŒ€í•´ ì‚½ì… ì •ë ¬ ìˆ˜í–‰
            for(int i= gap; i<n;i++){
                int key = arr[i];
                int j = i;

                // gapë§Œí¼ ë–¨ì–´ì§„ ìš”ì†Œì™€ ë¹„êµí•˜ë©° ì •ë ¬
                while(j >= gap && arr[j-gap] > key){
                    arr[j] = arr[j-gap];
                    j -= gap;
                }

                arr[j] = key;
            }
        }
    }
}