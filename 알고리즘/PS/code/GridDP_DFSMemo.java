import java.util.*;


// ê·¸ë¦¬ë“œ DP - 3ë²ˆ ìœ í˜•: DFS + ë©”ëª¨ì´ì œì´ì…˜

// ì‹œê°„ë³µì¡ë„ : O(m*n), ê³µê°„ë³µì¡ë„ : O(n)
// mì€ í–‰, nì€ ì—´ì´ë‹¤.
public class GridDP_DFSMemo {

    // ë¬´í•œëŒ€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ìƒìˆ˜ (ì•„ì§ ë°©ë¬¸ ì•ˆ í•œ ì¹¸ í‘œì‹œìš©)
    private static final int INF = Integer.MAX_VALUE;

    // âœ… ì§„ì… í•¨ìˆ˜: ì „ì²´ gridë¥¼ ë°›ì•„ì„œ ìµœì†Œ ê²½ë¡œ í•©ì„ ê³„ì‚°
    public static int minPathSum(int[][] grid) {
        int m = grid.length;       // í–‰ ê°œìˆ˜
        int n = grid[0].length;    // ì—´ ê°œìˆ˜

        // ë©”ëª¨ì´ì œì´ì…˜ìš© ë°°ì—´ (ê° ì¹¸ê¹Œì§€ì˜ ìµœì†Œ ê²½ë¡œ í•©ì„ ì €ì¥)
        int[][] memo = new int[m][n];

        // ì•„ì§ ë°©ë¬¸í•˜ì§€ ì•Šì€ ì¹¸ì€ INFë¡œ ì´ˆê¸°í™”
        for (int[] row : memo) {
            Arrays.fill(row, INF);
        }

        // (m-1, n-1) ì§€ì ê¹Œì§€ì˜ ìµœì†Œ ê²½ë¡œ í•©ì„ ê³„ì‚°í•´ì„œ ë°˜í™˜
        return dfs(grid, m - 1, n - 1, memo);
    }

    // âœ… DFS + ë©”ëª¨ì´ì œì´ì…˜ í•¨ìˆ˜
    // (x, y)ê¹Œì§€ ë„ë‹¬í•˜ëŠ” ë° í•„ìš”í•œ ìµœì†Œ ê²½ë¡œ í•©ì„ ê³„ì‚°
    // ì—­ë°©í–¥ ì‚¬ê³ ë¡œ ë“¤ì–´ê°„ë‹¤.
    private static int dfs(int[][] grid, int x, int y, int[][] memo) {
        // ğŸ”¸ ê¸°ì € ì¡°ê±´ 1: ì‹œì‘ì  (0, 0)ì— ë„ë‹¬ â†’ ìê¸° ìì‹ ì˜ ê°’ì´ ìµœì†Œê°’
        if (x == 0 && y == 0) return grid[0][0];

        // ğŸ”¸ ê¸°ì € ì¡°ê±´ 2: ì´ë¯¸ ê³„ì‚°ëœ ìœ„ì¹˜ â†’ ì¤‘ë³µ ê³„ì‚° ë°©ì§€
        if (memo[x][y] != INF) return memo[x][y];

        int minSum = INF; // í˜„ì¬ ìœ„ì¹˜ê¹Œì§€ì˜ ìµœì†Œ ê²½ë¡œ í•© ì´ˆê¸°ê°’ ì„¤ì •

        // ğŸ”¼ ìœ„ì—ì„œ ë‚´ë ¤ì˜¤ëŠ” ê²½ìš° ê³ ë ¤ (ê²½ê³„ ì¡°ê±´: x > 0)
        if (x > 0) {
            int fromTop = dfs(grid, x - 1, y, memo);   // ìœ„ìª½ ì¹¸ê¹Œì§€ì˜ ìµœì†Œ ê²½ë¡œ
            minSum = Math.min(minSum, fromTop);        // ìµœì†Œê°’ ê°±ì‹ 
        }

        // â—€ï¸ ì™¼ìª½ì—ì„œ ì˜¤ëŠ” ê²½ìš° ê³ ë ¤ (ê²½ê³„ ì¡°ê±´: y > 0)
        if (y > 0) {
            int fromLeft = dfs(grid, x, y - 1, memo);  // ì™¼ìª½ ì¹¸ê¹Œì§€ì˜ ìµœì†Œ ê²½ë¡œ
            minSum = Math.min(minSum, fromLeft);       // ìµœì†Œê°’ ê°±ì‹ 
        }

        // í˜„ì¬ ì¹¸ê¹Œì§€ì˜ ìµœì†Œ ê²½ë¡œ = ì™¼ìª½/ìœ„ìª½ ì¤‘ ì‘ì€ ê°’ + í˜„ì¬ ì¹¸ì˜ ê°’
        memo[x][y] = minSum + grid[x][y];

        // ê³„ì‚°ëœ ê°’ì„ ë°˜í™˜
        return memo[x][y];
    }

    // âœ”ï¸ í…ŒìŠ¤íŠ¸ìš© main í•¨ìˆ˜
    public static void main(String[] args) {
        int[][] grid = {
                {1, 3, 1},
                {1, 5, 1},
                {4, 2, 1}
        };

        // ì •ë‹µ: 7 (1â†’3â†’1â†’1â†’1)
        System.out.println(minPathSum(grid));
    }
}
