# ğŸ’£ **í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ ì•ˆì—ì„œ DDLê³¼ DMLì„ í•¨ê»˜Â ì¨ë„ ë ê¹Œ?**

> âœ… ê²°ë¡  : PostgreSQLë§Œ ê´œì°®ê³ , ë‚˜ë¨¸ì§€ëŠ” ìë™ ì»¤ë°‹ ì§€ì˜¥ì— ë¹ ì§„ë‹¤
>

---

## 1ï¸âƒ£ [ğŸš¨ ê²°ë¡  ë¨¼ì €: PostgreSQLì„ ì œì™¸í•˜ë©´ **DDL + DML í•¨ê»˜ ì“°ë©´ ì•ˆ ëœë‹¤**]

- MySQL, MariaDB, Oracle ë“±ì€ **íŠ¸ëœì­ì…˜ ë¸”ë¡ ë‚´ì—ì„œ DDLì„ ì‹¤í–‰í•˜ëŠ” ìˆœê°„ ìë™ ì»¤ë°‹ ë°œìƒ**
- ì´ ë•Œë¬¸ì— ê·¸ ì´ì „ì˜ DML(INSERT ë“±)ê¹Œì§€ **ê°•ì œ ì»¤ë°‹ë˜ì–´ ROLLBACKì´ ë¬´ì˜ë¯¸**
- PostgreSQLì€ ì˜ˆì™¸. ëŒ€ë¶€ë¶„ì˜ DDLì´ íŠ¸ëœì­ì…˜ ë‚´ì—ì„œë„ **ì •ìƒì ìœ¼ë¡œ ë¡¤ë°± ê°€ëŠ¥**

ğŸ§  **í•œ ì¤„ ìš”ì•½**

> "DDLë„ íŠ¸ëœì­ì…˜ ì•ˆì— ë„£ì–´ë„ ë˜ë‚˜?" â†’ PostgreSQLë§Œ OK, ë‚˜ë¨¸ì§€ëŠ” ìœ„í—˜
>

---

## 2ï¸âƒ£ [ğŸ”„ ì˜ˆì‹œë¡œ ë³´ëŠ” ë™ì‘ ì°¨ì´]

```sql
START TRANSACTION;

-- DML ì‹¤í–‰
INSERT INTO test (id) VALUES (1);

-- DDL ì‹¤í–‰ (ì•”ë¬µì  ì»¤ë°‹ ë°œìƒ!)
CREATE TABLE test2 (id INT);

ROLLBACK; -- ì˜ë¯¸ ì—†ìŒ. INSERTëŠ” ì´ë¯¸ ì»¤ë°‹ë¨
```

- ìœ„ ì½”ë“œëŠ” PostgreSQLì—ì„œëŠ” ë¡¤ë°± ê°€ëŠ¥
- í•˜ì§€ë§Œ MySQL, MariaDB, Oracleì—ì„  **CREATE TABLE ì‹¤í–‰ ìˆœê°„ INSERTë„ ì»¤ë°‹ë¨**

---

## 3ï¸âƒ£ [ğŸ§© ê° DBMSë³„ DDL íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ë°©ì‹ ë¹„êµ]

| DBMS | DDL ì‹¤í–‰ ì‹œì ì— ì»¤ë°‹ ë°œìƒ? | íŠ¸ëœì­ì…˜ ë‚´ DDL-Rollback ê°€ëŠ¥? | íŠ¹ì´ì‚¬í•­ |
| --- | --- | --- | --- |
| **MySQL** | âœ… ì•”ë¬µì  ì»¤ë°‹ | âŒ ë¶ˆê°€ | `CREATE TEMPORARY TABLE`ì€ ì˜ˆì™¸ |
| **MariaDB** | âœ… ì•”ë¬µì  ì»¤ë°‹ | âŒ ë¶ˆê°€ | MySQLê³¼ ë™ì¼ ë™ì‘ |
| **Oracle** | âœ… ì•”ë¬µì  ì»¤ë°‹ | âŒ ë¶ˆê°€ | `CREATE`, `ALTER`, `DROP` ì „ë¶€ ìë™ ì»¤ë°‹ |
| **PostgreSQL** | âŒ ìë™ ì»¤ë°‹ ì—†ìŒ | âœ… ê°€ëŠ¥ | ë‹¨, `CREATE DATABASE`, `TABLESPACE` ë“±ì€ ì˜ˆì™¸ |

---

## 4ï¸âƒ£ [âš™ï¸ ë‚´ë¶€ êµ¬ì¡° ì°¨ì´: ì™œ PostgreSQLë§Œ ê°€ëŠ¥í•œê°€?]

### ğŸ”¸ MySQL(InnoDB), Oracle ë“±

- MVCCëŠ” **ì‚¬ìš©ì ë°ì´í„°ì—ë§Œ ì ìš©**,
- ë©”íƒ€ë°ì´í„°(í…Œì´ë¸” ì •ì˜ ë“±)ëŠ” ë³„ë„ êµ¬ì¡°ë¡œ ê´€ë¦¬ë¨ â†’ **ë¡¤ë°± ë¶ˆê°€**

### ğŸ”¸ PostgreSQL

- **ì‹œìŠ¤í…œ ì¹´íƒˆë¡œê·¸ì¡°ì°¨ ì¼ë°˜ í…Œì´ë¸”ì²˜ëŸ¼ ê´€ë¦¬**
- í…Œì´ë¸” ì •ì˜ ì •ë³´ë„ MVCC ëŒ€ìƒ â†’ **DDLë„ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ê°ìŒ€ ìˆ˜ ìˆìŒ**

ğŸ§  PostgreSQLì—ì„œ ê°€ëŠ¥í•œ ì´ìœ ëŠ” **ì•„í‚¤í…ì²˜ ìì²´ì˜ ì°¨ì´** ë•Œë¬¸

---

## 5ï¸âƒ£ [ğŸ“Œ ì‹¤ë¬´ íŒ ìš”ì•½]

| ìƒí™© | ê¶Œì¥ ì—¬ë¶€ | ì„¤ëª… |
| --- | --- | --- |
| MySQL/MariaDBì—ì„œ íŠ¸ëœì­ì…˜ ì¤‘ DDL | âŒ ì§€ì–‘ | DMLê¹Œì§€ ê°•ì œ ì»¤ë°‹ë¨ |
| Oracleì—ì„œ íŠ¸ëœì­ì…˜ ì¤‘ DDL | âŒ ì§€ì–‘ | ì¦‰ì‹œ ì»¤ë°‹ ë°œìƒ |
| PostgreSQLì—ì„œ íŠ¸ëœì­ì…˜ ì¤‘ DDL | âœ… ì‚¬ìš© ê°€ëŠ¥ | ëŒ€ë¶€ë¶„ ë¡¤ë°± ê°€ëŠ¥ |
| ì„ì‹œ í…Œì´ë¸” ìƒì„± (MySQL) | âš ï¸ ê°€ëŠ¥ | `CREATE TEMPORARY TABLE`ì€ ì˜ˆì™¸ë¡œ ì»¤ë°‹ ë°œìƒ ì•ˆ í•¨ |

---

## âœ¨ ë§ˆë¬´ë¦¬: ì™œ ì´ê±¸ ê¼­ ì•Œì•„ì•¼ í• ê¹Œ?

> ğŸ’¬ "ë‚´ê°€ INSERT í•´ë†“ê³  ROLLBACK í–ˆëŠ”ë° ì™œ ë°˜ì˜ëì§€?"
>
>
> â†’ ëŒ€ë¶€ë¶„ **ì¤‘ê°„ì— DDL ë„£ì—ˆë‹¤ê°€ ê°•ì œ ì»¤ë°‹ëœ ê²ƒ**
>
- íŠ¹íˆ **ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ë‚˜ í…Œì´ë¸” ìƒì„± ë¡œì§ì— ì£¼ì˜**
- **PostgreSQLì€ ì‹ ë¢° ê°€ëŠ¥**, ë‚˜ë¨¸ì§€ëŠ” **DDLì€ íŠ¸ëœì­ì…˜ ë°–ì—ì„œ ë”°ë¡œ ì²˜ë¦¬**í•˜ëŠ” ê²Œ ì•ˆì „

---

## ğŸ”— ì°¸ê³ ìë£Œ

- [MySQL: Implicit Commit Statements](https://dev.mysql.com/doc/refman/8.4/en/implicit-commit.html)
- [MariaDB: Statements That Cause an Implicit Commit](https://mariadb.com/kb/en/sql-statements-that-cause-an-implicit-commit/)
- [Oracle SQL Statement Types](https://docs.oracle.com/en/database/oracle/oracle-database/19/sqlrf/Types-of-SQL-Statements.html)
- [PostgreSQL System Catalogs](https://www.postgresql.org/docs/current/catalogs.html)

---

ì¶œì²˜ : https://dkswnkk.tistory.com/767